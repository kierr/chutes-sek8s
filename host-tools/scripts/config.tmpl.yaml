# tee-vm.yaml - TEE VM Configuration Template
# Copy this file and customize for your deployment

# VM Identity
vm:
  hostname: chutes-miner-tee-0 # Must be unique per miner hotkey
  image: ""  # Path to VM image (e.g., tdx-guest.qcow2). Leave empty to use CHUTES_IMAGE env var or run-td default
  
# Miner Credentials (Optional - prefer passing via CLI for security)
miner:
  ss58: "your_ss58_credential_here"
  seed: "your_seed_credential_here"

# Network Configuration
network:
  vm_ip: "192.168.100.2"
  bridge_ip: "192.168.100.1/24"
  dns: "8.8.8.8"
  public_interface: "ens9f0np0"
  type: "tap"  # Network type: "tap" (bridged) or "user" (SLIRP/port forwarding)
  ssh_port: 2222  # SSH port for user mode networking

# Volume Configuration
volumes:
  # General cache volume settings (required)
  cache:
    size: "5000G"
    path: ""  # Leave empty to auto-generate (cache-<hostname>.qcow2) or specify path (/data/cache-volume.qcow2)
  
  # Containerd cache volume settings (required for encrypted containerd storage)
  containerd:
    size: "500G"
    path: ""  # Leave empty to auto-generate (containerd-<hostname>.qcow2) or specify path (/data/containerd-cache.qcow2)
  
  # Config volume settings  
  config:
    path: ""  # Leave empty to auto-generate, or specify volume path (/data/config-volume.qcow2)


# Device Configuration
devices:
  bind_devices: true  # Set to false to skip GPU/NVSwitch binding

# Runtime Configuration
runtime:
  foreground: false  # Set to true for foreground mode