# System Manager Environment Configuration
# Managed by Ansible (status + cache routes)

# Server configuration
UDS_PATH=
BIND_ADDRESS='0.0.0.0'
PORT=8080
REQUIRE_TLS=false

HF_CACHE_BASE={{ system_manager_cache_base | default('/var/snap/cache') }}
VALIDATOR_BASE_URL={{ validator_base_url | mandatory('validator_base_url must be set in inventory') }}
# Miner credentials (MINER_SS58, MINER_SEED) are not set here; they are provided at runtime
# from the config volume via /etc/system-manager/miner.env (written by config-manager).
# Allowed validator SS58 for status endpoint auth
ALLOWED_VALIDATORS={{ validator }}

# Limits and security knobs (for system status router in system-manager)
MAX_OUTPUT_BYTES={{ system_status_max_output_bytes | default(16384) }}
COMMAND_TIMEOUT_SECONDS={{ system_status_command_timeout | default(10.0) }}
LOG_TAIL_DEFAULT={{ system_status_log_tail_default | default(200) }}
LOG_TAIL_MAX={{ system_status_log_tail_max | default(1000) }}
LOG_WINDOW_MAX_MINUTES={{ system_status_log_window_max | default(1440) }}

# TLS paths (unused when binding to UDS)
TLS_CERT_PATH=
TLS_KEY_PATH=
CLIENT_CA_PATH=
MTLS_REQUIRED=false
DEBUG={{ system_status_debug | default(false) | lower }}
